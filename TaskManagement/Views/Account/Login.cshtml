@{
    ViewData["Title"] = "Giriş Yap";
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- toastr bildirimleri için gerekli CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />
<style>
    body {
        background: linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%);
        min-height: 100vh;
        color: #22223b;
    }
    .login-container {
        max-width: 400px;
        margin: 60px auto;
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        padding: 2.5rem 2rem 2rem 2rem;
        animation: fadeIn 1s;
    }
    .login-avatar {
        width: 80px;
        height: 80px;
        background: #6366f1;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1rem auto;
        color: #fff;
        font-size: 2.5rem;
        box-shadow: 0 2px 8px rgba(99,102,241,0.15);
    }
    .login-title {
        text-align: center;
        font-weight: 700;
        font-size: 2rem;
        margin-bottom: 1.5rem;
        color: #22223b;
    }
    .form-label {
        color: #22223b;
        font-weight: 600;
    }
    .form-control:focus {
        border-color: #6366f1;
        box-shadow: 0 0 0 0.2rem rgba(99,102,241,0.15);
    }
    .btn-login {
        background: #6366f1;
        color: #fff;
        font-weight: 600;
        border-radius: 8px;
        transition: background 0.2s;
    }
    .btn-login:hover {
        background: #4f46e5;
    }
    .login-footer {
        text-align: center;
        margin-top: 1.5rem;
        color: #6b7280;
    }
    /* DARK MODE login ekranı */
    body.dark-mode {
        background: #181a1b !important;
        color: #f4f6fb !important;
    }
    body.dark-mode .login-container {
        background: #23232b !important;
        color: #f4f6fb !important;
        box-shadow: 0 8px 32px 0 rgba(40, 40, 60, 0.25);
    }
    body.dark-mode .login-title,
    body.dark-mode .form-label {
        color: #f4f6fb !important;
    }
    body.dark-mode .form-control {
        background: #181a1b !important;
        color: #f4f6fb !important;
        border-color: #444 !important;
    }
    body.dark-mode .form-control:focus {
        border-color: #6366f1 !important;
        box-shadow: 0 0 0 0.2rem rgba(99,102,241,0.15) !important;
    }
    body.dark-mode .btn-login {
        background: #6366f1 !important;
        color: #fff !important;
    }
    body.dark-mode .btn-login:hover {
        background: #4f46e5 !important;
    }
    body.dark-mode .login-footer {
        color: #b0b0b0 !important;
    }
</style>
<div class="login-container">
    <div class="login-avatar">
        <i class="bi bi-person-circle"></i>
    </div>
    <div class="login-title">Giriş Yap</div>
    @if (ViewBag.Error != null)
    {
        <div class="alert alert-danger">@ViewBag.Error</div>
    }
    @if (TempData["ForgotPasswordResult"] != null)
    {
        <div class="alert alert-info mt-3 text-center">@TempData["ForgotPasswordResult"]</div>
    }
    <form asp-action="Login" method="post" autocomplete="off">
        <div class="mb-3">
            <label for="username" class="form-label">Kullanıcı Adı</label>
            <input type="text" class="form-control" id="username" name="username" placeholder="Kullanıcı adınızı girin" required autofocus />
        </div>
        <div class="mb-3">
            <label for="password" class="form-label">Şifre</label>
            <input type="password" class="form-control" id="password" name="password" placeholder="Şifrenizi girin" required />
        </div>
        <button type="submit" class="btn btn-login w-100">Giriş Yap</button>
    </form>
    <div class="text-center mt-3">
        <a href="#" data-bs-toggle="modal" data-bs-target="#forgotPasswordModal" class="link-primary">Şifremi Unuttum</a>
    </div>
    <div class="login-footer">
        Hesabın yok mu? <a href="/Account/Register">Kayıt Ol</a>
    </div>
</div>

<!-- Şifremi Unuttum Modal -->
<div class="modal fade" id="forgotPasswordModal" tabindex="-1" aria-labelledby="forgotPasswordModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="forgotPasswordModalLabel">Şifre Sıfırlama</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Kapat"></button>
      </div>
      <form method="post" action="/Account/ForgotPassword">
        <div class="modal-body">
          <div class="mb-3">
            <label for="forgotEmail" class="form-label">E-posta adresiniz</label>
            <input type="email" class="form-control" id="forgotEmail" name="email" required placeholder="E-posta adresinizi girin">
          </div>
          <div class="alert alert-info" style="font-size:0.95em;">Şifre sıfırlama bağlantısı, sistemde kayıtlı e-posta adresinize gönderilecektir.</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Kapat</button>
          <button type="submit" class="btn btn-primary">Gönder</button>
        </div>
      </form>
    </div>
    </div>
</div>
<!-- jQuery kütüphanesi -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- toastr bildirimleri için gerekli JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

<script>
    // Sunucudan gelen hata veya validasyon mesajlarını toastr ile göster
    @if (ViewBag.Error != null)
    {
        <text>toastr.error('@ViewBag.Error');</text>
    }
    @if (!ViewData.ModelState.IsValid)
    {
        foreach (var key in ViewData.ModelState.Keys)
        {
            var errors = ViewData.ModelState[key].Errors;
            foreach (var err in errors)
            {
                <text>toastr.error('@err.ErrorMessage');</text>
            }
        }
    }
</script> 